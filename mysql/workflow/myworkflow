2，关于DB部门日常工作范围
为开发部门提供数据库方面的技术支持
为产品部门提供需求报表数据
维护开发，测试，生产数据库的稳定运行
配合运维部门对数据库运行情况进行监控
及时处理出现的数据库方面
 
3，关于账号和权限分配
生产库的应用账号分配
          用户名 ：app_应用模块名  密码： 12位随机字串（数字字母特殊字符组合)  来源IP：应用模块所在的服务器内网IP  密码过期期限： 无
生产库的用户查看账号分配(原则上只给后端开发人员分配账号，其他部门人员如有生产库数据查看需求，则需要邮件发送申请，通过DBA配合来查看数据）
          用户名 ：RTX上的用户名   密码：12位随机字串（数字字母特殊字符组合)  来源IP：无限定  密码过期期限： 一个月  （为了处理简单期间，每月的月末最后一天进行用户查看账号的更新，并发送相关人员更新后的新密码）
注：用户查看账号只分配website 库的 SELECT权限
 
测试库和开发库的账号权限规则
           原则上开发库只分配开发人员的SUID权限，测试库只分配测试人员的SUID权限，如需要其它数据库组件相关权限请另行发邮件申请
申请格式为
数据库 ，对应组件，对应权限，申请理由
 
4，关于开发数据库DDL的更新
开发库DDL更新需要开发发送给DBA(通过邮件形式),由DBA在开发数据库上操作更新
DB部门维护最新的开发PDM数据字典文档,所有开发和测试还有产品人员都可以在SVN上看到最新的PDM文档，对于PDM文档的补充请发邮件给DB部门邮件标题格式为 [库名/表名] 数据字典修正
           svn://192.168.1.67/01_文档/新数据库文档目录/website/PDM文档/website.pdm
 
5，关于开发库版本同步到测试库
DB部门维护需要在测试库更新的所有DDL文档，开发部门在提交测试版本时需要同时提交发布测试文档，根据开发部门的文档，DB部门同时附上需要对测试库进行同步的DDL文档，确认无误后，更新维护的SVN文档 ，由DB部门执行测试库上的DDL更新，然后通知测试部门测试数据库更新完毕
要求更新开发库DDL相关邮件格式 [项目名称 ] DDL更新

对于无法提交测试的部分 更新邮件格式为 [项目名称] DDL更新 （数据库环境名称，如，开发，测试，生产）
 
6，关于测试库版本发布到生产库
版本通过测试需要发布到线上数据库，则测试部门需要提交DB部门线上发布文档，DB部门根据维护的SVN文档以及测试部门提交的发布文档中DDL文档进行核对，无误后，更新DB部门的数据库SVN文档，然后进行线上数据库的DDL更新，完毕后通知测试部门线上数据库更新完毕
 
7，关于数据报表,以及数据修改需求
各部门的数据报表需求都需通过邮件提交，每位提交需求的用户在SVN上有单独的目录，记录所有提交查询的需求，以及DBA执行查询的DML语句(包括查看个别数据的需求)
          svn://192.168.1.67/01_文档/新数据库文档目录/数据报表需求
 
8，关于数据库监控
目前生产环境的监控系统icinga上已经添加了画图插件，关于数据库状态分为两类指标，无图形数据指标和有图形数据指标,数据库监控工具使用percona 的mysql监控插件，监控指标详见mysql 监控指标
 
9，关于每周生产库索引变化操作
统一在周一晚上做，操作记录文档在svn://192.168.1.67/01_文档/新数据库文档目录/周一任务/索引任务文档.txt

10，关于生产库慢查询SQL的反馈
每天查看线上的mysql慢查询日志，如果是索引设置不合理问题，则更新索引任务文档，如果是复杂SQL引起的性能问题则将SQL反馈给开发部门

11，关于SQL审核
即将上线的业务系统在测试系统上做压力测试的时候收集产生的慢查询日志，通过分析慢查询日志，设计合理的索引，并过滤出有问题的SQL
目前的做法是每天定时取前一天开发生成的慢查询日志，通过anemometer工具在web端展现慢查询，如果是索引不合理引起的则修改开发库索引，并同步更新测试库和生产库（关于生产库更新索引办法参考关于每周生产库索引变化操作）如果是SQL引起的问题则反馈给开发部门
anemometer 地址 http://192.168.1.188:81/anemometer
对于发给开发的有问题的SQL，DB部门需要去了解业务，并帮助开发改写SQL，沟通方法：邮件群发问题SQL

12，关于表设计流程
首先根据相关业务需求(主要参考输出输入条件)规划出表的基本结构记录到PDM文档，以design_表名表示初步定字段的表
 
预估相关表的数据量进行容量规划，确定主键和唯一索引，必要时根据容量规划结果确定分区，或者分表分库
收集开发人员的查询、删除、更新相关语句，根据对相关处理语句的分析对数据结构进行相应的变更，进行索引的设计，以design2_表名 表示第二次定稿的表


注意：在做DDL更新文档的时候忽略PDM中以design开头的表 （已设计完毕的表勿用design开头)
 
13，线上数据库配置修改流程
所有配置修改都需要在本地环境做测试
凡是需要重起数据库生效的配置，统一在晚上10点之后做，每个数据库做的配置变动记录到SVN相应文档中 svn://192.168.1.67/01_文档/新数据库文档目录/线上数据库操作记录

14，关于问题SQL列表
不定时更新线上发现的明显问题的SQL，让开发能够避免此类情况，列表地址线上问题SQL列表
15,关于线上生产库碰到的BUG描述列表
MySQL bug list

16. 关于数据库各组件上线流程
      详细记录见点我吧&点我达项目数据库组件上线记录表
 
17.关于数据库各组件下线流程
      1,首先命名原组件为 del_组件名称,并记录到备份&删除文档(同时检查上游依赖可否同时删除)
      2, 在过有效期后删除(通常一周有效期)
